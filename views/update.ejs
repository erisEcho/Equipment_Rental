<!DOCTYPE html>
<html lang="en">

<head>
    <!-- character encoding -->
    <meta charset="utf-8">
    <!-- adaptable to screen size -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>self-learning</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
        </script>

    <form method="post" action="/booking/update/<%= booking._id %>">
        <div class="row mb-3">
            <label for="inputEmail3" class="col-sm-2 col-form-label">Email</label>
            <div class="col-sm-10">
                <input type="email" class="form-control" id="inputEmail3" placeholder="Email input" name="email"
                    required value="<%= booking.email %>">
            </div>
        </div>
        <div class="row mb-3">
            <label for="numTickets" class="col-sm-2 col-form-label">Number of Tickets</label>
            <div class="col-sm-10">
                <input type="number" placeholder="Password input" name="numTickets" class="form-control" id="numTickets"
                    min=1 max=4 value="<%= booking.numTickets %>">
            </div>
        </div>
        <fieldset class="row mb-3">
            <legend class="col-form-label col-sm-2 pt-0">Payment Method</legend>
            <div class="col-sm-10">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="payment" id="gridRadios1" value="Credit Card"
                        checked>
                    <label class="form-check-label" for="gridRadios1">
                        Pay with Credit Card
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="payment" id="gridRadios2" value="Paypal">
                    <label class="form-check-label" for="gridRadios2">
                        Pay with Paypal
                    </label>
                </div>
        </fieldset>




        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Favourite Team</label>
            <select class="form-select" name="team" aria-label="Default select example"
                onchange="teamSelected(this.value)">
                <option value="" selected>Open this menu</option>
                <option value="Avengers">Avengers</option>
                <option value="JLA">Justive League</option>
            </select>
        </div>

        <div class="row mb-3">
            <label class="col-sm-2 col-form-label">Favourite Hero</label>
            <select class="form-select" name="superhero" aria-label="Default select example" id="superhero" disabled>
            </select>
        </div>

        <div class="row mb-3">
            <label class="col col-form-label"><input class="form-check-input" name="terms" value="true" type="checkbox"
                    required id="gridCheck1"> I have read and agree to the terms and conditions </label>
        </div>

        <button type="submit" class="btn btn-primary">Save change</button>

    </form>

            <script>

            const avengers = ['Iron Man', 'Captain America', 'Thor', 'Hulk', 'Black Widow', 'Hawkeye'];
            const justiceLeague = ['Superman', 'Batman', 'Wonder Woman', 'Flash', 'Aquaman', 'Cyborg'];

            function teamSelected(team) {
                // use alert dialog to show the selected team
                alert(team);
                var superheroElem = document.getElementById("superhero");
                superheroElem.options.length = 0;

                if (team == "Avengers") {
                    for (var hero of avengers) {
                        var option = document.createElement("option")
                        option.text = hero;
                        option.value = hero;
                        superheroElem.add(option);
                    }
                    superheroElem.disabled = false;
                } else if (team == "JLA") {
                    for (var hero of justiceLeague) {
                        var option = document.createElement("option")
                        option.text = hero;
                        option.value = hero;
                        superheroElem.add(option);
                    }
                    superheroElem.disabled = false;
                } else {
                    superheroElem.disabled = true;
                }
            }
            document.addEventListener("DOMContentLoaded", function () {
                document.querySelector("option[value='<%= booking.team %>']").selected = true;
                teamSelected('<%= booking.team %>')
                document.querySelector("option[value='<%= booking.superhero %>']").selected = true;
                document.querySelector("input[value='<%= booking.payment %>']").checked = true;
                document.querySelector("#gridCheck1").checked = "<%= booking.terms %>" == "true";
            });

            // chekbox 需要id #gridCheck1对应
            // 自动选中如何实现的？？？？

        </script>
</body>

</html>